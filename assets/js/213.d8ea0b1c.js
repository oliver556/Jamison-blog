(window.webpackJsonp=window.webpackJsonp||[]).push([[213],{548:function(t,a,e){"use strict";e.r(a);var r=e(7),s=Object(r.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"极空间-nas-配置-calibre-web-搭建个人图书馆"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#极空间-nas-配置-calibre-web-搭建个人图书馆"}},[t._v("#")]),t._v(" 极空间 NAS 配置 Calibre-Web 搭建个人图书馆")]),t._v(" "),a("h2",{attrs:{id:"功能简介"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#功能简介"}},[t._v("#")]),t._v(" 功能简介")]),t._v(" "),a("p",[t._v("平时喜欢搜集网络上的精品电子书，那么管理成为了一个问题，放在硬盘的一堆电子书文件，想看也不知道看哪本，然后就想到是否可以搭建一个电子书管理平台，方便管理、搜索和下载阅读。\n后来再往上了解到 "),a("a",{attrs:{href:"https://hub.docker.com/r/technosoft2000/calibre-web",target:"_blank",rel:"noopener noreferrer"}},[t._v("Calibre web"),a("OutboundLink")],1),t._v(" 这样的一个开源项目，可以比较方便的管理电子书，而且支持docker安装。比较容易集成到群晖NAS中，于是就完成了这样的项目搭建。功能包括：")]),t._v(" "),a("ul",[a("li",[t._v("管理自己的电子书，可管理海量书籍，包括书籍的分类、作者、简介等")]),t._v(" "),a("li",[t._v("可在线观看、书籍格式转换、推送到 Kindle 等")]),t._v(" "),a("li",[t._v("可选：通过 frp 等内外穿透工具实现任意地方访问")])]),t._v(" "),a("h2",{attrs:{id:"镜像配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#镜像配置"}},[t._v("#")]),t._v(" 镜像配置")]),t._v(" "),a("h3",{attrs:{id:"_1-下载镜像"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-下载镜像"}},[t._v("#")]),t._v(" 1. 下载镜像")]),t._v(" "),a("p",[t._v("打开 Docker 仓库，搜索 "),a("code",[t._v("calibre-web")]),t._v(" 下载")]),t._v(" "),a("p",[t._v("star 数量比较多的有两个，"),a("code",[t._v("linuxserver/calibre-web")]),t._v(" 和 "),a("code",[t._v("technosoft2000/calibre-web")]),t._v("，据说后者支持电子书转换等功能，功能更加强大，因此选择后者。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.staticaly.com/gh/oliver556/image-hosting@master/20221111/nas_11-11_01.2lxyjm2111y0.webp",alt:"nas_11-11_01"}})]),t._v(" "),a("p",[t._v("对应的 Docker Hub 地址："),a("a",{attrs:{href:"https://registry.hub.docker.com/r/technosoft2000/calibre-web/",target:"_blank",rel:"noopener noreferrer"}},[t._v("technosoft2000/calibre-web"),a("OutboundLink")],1),t._v(" - Docker Hub")]),t._v(" "),a("blockquote",[a("p",[t._v("PS：试过很多的 Calibre web 镜像，这个镜像是功能最强大的，包括电子书格式转换和在线阅读，而 "),a("a",{attrs:{href:"https://registry.hub.docker.com/r/linuxserver/calibre-web/",target:"_blank",rel:"noopener noreferrer"}},[t._v("linuxserver/calibre-web"),a("OutboundLink")],1),t._v(" 只能没有在线阅读和转换的功能。")])]),t._v(" "),a("h3",{attrs:{id:"_2-文件夹路径设置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-文件夹路径设置"}},[t._v("#")]),t._v(" 2. 文件夹路径设置")]),t._v(" "),a("p",[t._v("下载完成后，双击打开我们的镜像，直接来到【文件夹路径】。新建一个 Docker 文件夹，Docker 文件夹下新建一个 Calibre_Web_latest 文件夹，并选中它")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.staticaly.com/gh/oliver556/image-hosting@master/20221111/nas_11-11_02.wl0ngtke6m8.webp",alt:"nas_11-11_02"}})]),t._v(" "),a("h3",{attrs:{id:"_3-端口设置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-端口设置"}},[t._v("#")]),t._v(" 3. 端口设置")]),t._v(" "),a("p",[t._v("配置端口，可以自定义，容器端口是 8083")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.staticaly.com/gh/oliver556/image-hosting@master/20221111/nas_11-11_03.1ljej66dgxr4.webp",alt:"nas_11-11_03"}})]),t._v(" "),a("h3",{attrs:{id:"_4-文件夹访问权限"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-文件夹访问权限"}},[t._v("#")]),t._v(" 4. 文件夹访问权限")]),t._v(" "),a("p",[t._v("添加文件夹读写权限，否则后面上传书籍数据库会报错没有权限。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.staticaly.com/gh/oliver556/image-hosting@master/20221111/nas_11-11_04.1bfvhgbnnny8.webp",alt:"nas_11-11_04"}})]),t._v(" "),a("p",[t._v("然后应用，其他配置可以不修改。可以启动容器了，启动过程比较慢，因为需要从github上下载不少资源。")]),t._v(" "),a("h2",{attrs:{id:"网页登录管理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#网页登录管理"}},[t._v("#")]),t._v(" 网页登录管理")]),t._v(" "),a("p",[t._v("启动好容器之后在浏览器输入网址："),a("a",{attrs:{href:""}},[t._v("http://NAS_IP:8083/")]),t._v(" 可以访问管理界面了，默认登录账号是："),a("code",[t._v("admin/admin123")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.staticaly.com/gh/oliver556/image-hosting@master/20221111/nas_11-11_05.15w3a3040vcw.webp",alt:"nas_11-11_05"}})]),t._v(" "),a("p",[t._v("登录好之后可以修改管理界面语言，修改管理员密码等操作。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.staticaly.com/gh/oliver556/image-hosting@master/20221111/nas_11-11_06.6k85lkw51jc0.webp",alt:"nas_11-11_06"}})]),t._v(" "),a("p",[t._v("在书库配置中，设置为 "),a("code",[t._v("/books")]),t._v("，点击保存。")]),t._v(" "),a("p",[t._v("此时会提示 "),a("code",[t._v("数据库路径无效，请输入正确的路径")]),t._v("。")]),t._v(" "),a("p",[t._v("由于 Calibre-web 是基于 Calibre 这款软件的，书库里会有 "),a("code",[t._v("metadata.db")]),t._v(" 的数据库文件，而我们创建的文件夹是没有任何文件。")]),t._v(" "),a("p",[t._v("因此我们电脑中安装 "),a("a",{attrs:{href:"https://www.zhyong.cn/posts/59a8/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Calibre"),a("OutboundLink")],1),t._v("，然后用电脑挂载群晖，在此位置建立一个空白书库（注意：群晖需要安装 WebDAV Server）。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.staticaly.com/gh/oliver556/image-hosting@master/20221111/nas_11-11_08.6dnn7x875h00.webp",alt:"nas_11-11_08"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.staticaly.com/gh/oliver556/image-hosting@master/20221111/nas_11-11_07.4n330u35gkq0.webp",alt:"nas_11-11_07"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.staticaly.com/gh/oliver556/image-hosting@master/20221111/nas_11-11_09.2nw9gos7z920.webp",alt:"nas_11-11_09"}})]),t._v(" "),a("p",[t._v("完成后，就会在该位置生成一个 "),a("code",[t._v("metadata.db")]),t._v(" 的文件。然后重试，提示配置已经更新。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.staticaly.com/gh/oliver556/image-hosting@master/20221111/nas_11-11_10.7grz4g4q0m80.webp",alt:"nas_11-11_10"}})]),t._v(" "),a("p",[t._v("点击登录，用户名：admin 密码：admin123")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.staticaly.com/gh/oliver556/image-hosting@master/20221111/nas_11-11_11.4cww9ny2yc80.webp",alt:"nas_11-11_11"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.staticaly.com/gh/oliver556/image-hosting@master/20221111/nas_11-11_12.5diql74skq40.webp",alt:"nas_11-11_12"}})]),t._v(" "),a("h2",{attrs:{id:"网页配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#网页配置"}},[t._v("#")]),t._v(" 网页配置")]),t._v(" "),a("h3",{attrs:{id:"_1-设置中文"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-设置中文"}},[t._v("#")]),t._v(" 1. 设置中文")]),t._v(" "),a("p",[t._v("默认为英文界面，在 admin → language 设置即可。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.staticaly.com/gh/oliver556/image-hosting@master/20221111/nas_11-11_13.14c5vz19aoqk.webp",alt:"nas_11-11_13"}})]),t._v(" "),a("h3",{attrs:{id:"_2-开启网页上传-对于少量书籍上传非常实用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-开启网页上传-对于少量书籍上传非常实用"}},[t._v("#")]),t._v(" 2. 开启网页上传，对于少量书籍上传非常实用")]),t._v(" "),a("p",[t._v("在管理权限 → 编辑基本配置 → 功能配置中，其它功能也可在此开启。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.staticaly.com/gh/oliver556/image-hosting@master/20221111/nas_11-11_14.wq4z5j6mue8.webp",alt:"nas_11-11_14"}})]),t._v(" "),a("p",[t._v("刷新一下页面，在右上角则出现上传书籍。测试上传书籍报错：")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("数据库错误：(sqlite3.OperationalError) attempt to write a readonly database [SQL: INSERT INTO authors (name, sort, link) VALUES (?, ?, ?)] [parameters: (u'\\u672a\\u77e5', u'\\u672a\\u77e5', u'')] (Background on this error at: http://sqlalche.me/e/e3q8)。\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("原因在于无写入权限，将容器的环境配置中设置一下该文件夹的权限，新增两行， "),a("code",[t._v("PGID")]),t._v(" 和 "),a("code",[t._v("PUID")]),t._v(" 值为 "),a("code",[t._v("0")]),t._v(" （表示，可读取、写入）。（读取、写入应该就可以了），然后重启容器，即可解决此问题。")]),t._v(" "),a("p",[t._v("成功在 Web 上传：")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.staticaly.com/gh/oliver556/image-hosting@master/20221111/nas_11-11_15.1q679er3w2ww.webp",alt:"nas_11-11_15"}})]),t._v(" "),a("p",[t._v("上传或编辑书籍时，可点击最下面的获取元数据，即可获得作者、解决、封面图片等各类信息，这是我非常喜欢的一个功能，很强大。获取后保存即可，封面更改有时会迟一点生效。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.staticaly.com/gh/oliver556/image-hosting@master/20221111/nas_11-11_16.62owi1h8kpo0.webp",alt:"nas_11-11_16"}})]),t._v(" "),a("h3",{attrs:{id:"_3-转换书籍为-epub-格式从而在线观看"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-转换书籍为-epub-格式从而在线观看"}},[t._v("#")]),t._v(" 3. 转换书籍为 epub 格式从而在线观看")]),t._v(" "),a("p",[t._v("此程序可以在线观看 TXT、pdf 和 epub 格式，epub 格式是一个通用的电子书格式，因此将其它书籍转换为此格式从而在线阅读。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.staticaly.com/gh/oliver556/image-hosting@master/20221111/nas_11-11_17.4bx1zv1570e0.webp",alt:"nas_11-11_17"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.staticaly.com/gh/oliver556/image-hosting@master/20221111/nas_11-11_18.6dlyykb0r800.webp",alt:"nas_11-11_18"}})]),t._v(" "),a("p",[t._v("这样就可以在线阅读了，有目录导航，可以添加书签，全屏阅读等，并且可以记住阅读位置，下一次打开接着阅读（不可跨设备，书签可以跨设备），体验非常棒。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.staticaly.com/gh/oliver556/image-hosting@master/20221111/nas_11-11_19.4rjgrvj6pos.webp",alt:"nas_11-11_19"}})]),t._v(" "),a("h2",{attrs:{id:"批量上传电子书"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#批量上传电子书"}},[t._v("#")]),t._v(" 批量上传电子书")]),t._v(" "),a("p",[t._v("那么如果有大量电子书该如何上传呢？思路还是一样，直接用电脑挂载极空间的文件夹，使用 "),a("a",{attrs:{href:"https://calibre-ebook.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Calibre"),a("OutboundLink")],1),t._v(" 打开该书库，然后就可以批量上传、管理了。")]),t._v(" "),a("h2",{attrs:{id:"总结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[t._v("#")]),t._v(" 总结")]),t._v(" "),a("p",[t._v("总之，搭建过程还是较为麻烦，涉及的方面较多，需要了解相关的基础知识，但是此篇教程我写的较为详细，相信只要耐心都能搭建成功，毕竟我使用这个有一段时间了，有的需要注意的地方我都写出来了，Docker 映像也选择好了，\n注意文件夹的权限是一个大坑，搭建不成功很大方面是这个原因。")]),t._v(" "),a("p",[t._v("另外内外穿透方面，这涉及的更多了，提供这一种思路，有能力自行折腾了。")]),t._v(" "),a("h2",{attrs:{id:"参考"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[t._v("#")]),t._v(" 参考")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://www.zhyong.cn/posts/fcef/",target:"_blank",rel:"noopener noreferrer"}},[t._v("群晖 Docker 部署 Calibre Web 打造全功能书库"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://fugary.com/?p=203",target:"_blank",rel:"noopener noreferrer"}},[t._v("群晖NAS配置calibre-web搭建个人图书馆"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);a.default=s.exports}}]);