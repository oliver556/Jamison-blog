(window.webpackJsonp=window.webpackJsonp||[]).push([[233],{568:function(e,t,s){"use strict";s.r(t);var a=s(7),r=Object(a.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"git-提交信息规范"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#git-提交信息规范"}},[e._v("#")]),e._v(" Git 提交信息规范")]),e._v(" "),t("div",{staticClass:"custom-block note"},[t("p",{staticClass:"custom-block-title"},[e._v("Git 提交信息规范")]),e._v(" "),t("p",[e._v("无论是个人项目还是团队协作中，commit message 都应该清晰明了，遵守一定规范。\n目前，社区有多种 commit message 的写法规范。本文介绍 Angular 规范，这是目前使用最广的写法，比较合理和系统化，并且有配套的工具。")])]),e._v(" "),t("h2",{attrs:{id:"一-格式化-commit-message-的目的"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一-格式化-commit-message-的目的"}},[e._v("#")]),e._v(" 一. 格式化 commit message 的目的")]),e._v(" "),t("ul",[t("li",[e._v("提供更多的历史信息，方便快速浏览。")]),e._v(" "),t("li",[e._v("可以过滤某些 commit（比如文档改动），便于快速查找信息。")]),e._v(" "),t("li",[e._v("可以直接从 commit 生产 Change Log。")])]),e._v(" "),t("h2",{attrs:{id:"二-commit-message-的格式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#二-commit-message-的格式"}},[e._v("#")]),e._v(" 二. commit message 的格式")]),e._v(" "),t("p",[e._v("每次提交，commit message 都包括三个部分：Header、Body、Footer。")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("<type>(<scope>): <subject> # header\n# 空一行\n<body>\n# 空一行\n<footer> \n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br")])]),t("p",[e._v("其中，"),t("strong",[e._v("Header 是必须的")]),e._v("，Body 和 Footer 省略。")]),e._v(" "),t("p",[e._v("不管是哪一个部分，任何一行都不得超过 72 个字符（或 100 个字符）。这是为了避免自动换行影响美观。")]),e._v(" "),t("h3",{attrs:{id:"_1-header"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-header"}},[e._v("#")]),e._v(" 1. Header")]),e._v(" "),t("p",[e._v("Header 部分只有一行：包括三个字段：type（必需）、scope（可选）和 subject（必需）。")]),e._v(" "),t("p",[t("strong",[e._v("（1）type")])]),e._v(" "),t("p",[e._v("type 用于说明 commit 的类别，只允许使用下面 7 个标识：")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("feat")]),e._v(": 新功能（feature）")]),e._v(" "),t("li",[t("code",[e._v("fix")]),e._v(": 修复 bug")]),e._v(" "),t("li",[t("code",[e._v("docs")]),e._v(": 文档（documentation）")]),e._v(" "),t("li",[t("code",[e._v("style")]),e._v(": 格式（不影响代码运行的变动）")]),e._v(" "),t("li",[t("code",[e._v("refactor")]),e._v(": 重构（即不是新增功能，也不是修复 bug，而是修改代码逻辑本身以达到改善的代码）")]),e._v(" "),t("li",[t("code",[e._v("test")]),e._v(": 增加测试")]),e._v(" "),t("li",[t("code",[e._v("chore")]),e._v(": 构建过程或辅助工具的变动")])]),e._v(" "),t("p",[e._v("如果 type 为 feat 和 fix，则该 commit 将肯定出现在 Change Log 中。其他情况（docs、chore、style、refactor、test）由你决定，要不要放入 Change Log 中，建议是不要。")]),e._v(" "),t("p",[t("strong",[e._v("（2）scope")])]),e._v(" "),t("p",[e._v("用于说明 commit 影响的范围，比如数据层、控制层、视图层等等，视项目不同而不同。")]),e._v(" "),t("p",[t("strong",[e._v("（3）subject")])]),e._v(" "),t("p",[e._v("subject 是 commit 目的的简短描述，不超过 50 个字符。")]),e._v(" "),t("ul",[t("li",[e._v("以动词开头，使用第一人称现在时，比如 change，而不是 changed 或 changes。")]),e._v(" "),t("li",[e._v("第一个字母小写。")]),e._v(" "),t("li",[e._v("几位不加句号（.）。")])]),e._v(" "),t("h3",{attrs:{id:"_2-body"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-body"}},[e._v("#")]),e._v(" 2. Body")]),e._v(" "),t("p",[e._v("用于对本次 commit 的详细描述，可以分成多行。下面是一个范例：")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("More detailed explanatory text, if necessary.  Wrap it to \nabout 72 characters or so. \n\nFurther paragraphs come after blank lines.\n\n- Bullet points are okay, too\n- Use a hanging indent\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br"),t("span",{staticClass:"line-number"},[e._v("6")]),t("br"),t("span",{staticClass:"line-number"},[e._v("7")]),t("br")])]),t("p",[e._v("有两个注意点：")]),e._v(" "),t("ol",[t("li",[e._v("使用第一人称现在时，比如使用 change 而不是 changed 或 changes。")]),e._v(" "),t("li",[e._v("应该说明代码变动的动机，以及与以前行为的对比。")])]),e._v(" "),t("h3",{attrs:{id:"_3-footer"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-footer"}},[e._v("#")]),e._v(" 3. Footer")]),e._v(" "),t("p",[e._v("Footer 部分只用于两种情况。")]),e._v(" "),t("p",[t("strong",[e._v("（1）不兼容变动")])]),e._v(" "),t("p",[e._v("如果当前代码与上一个版本不兼容，则 Footer 部分以 "),t("code",[e._v("BREAKING CHANGE")]),e._v(" 开头，后面是对变动的描述、以及变动理由和迁移方法。")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("BREAKING CHANGE: isolate scope bindings definition has changed.\n\nTo migrate the code follow the example below:\n\nBefore:\n\nscope: {\n  myAttr: 'attribute',\n}\n\nAfter:\n\nscope: {\n  myAttr: '@',\n}\n\nThe removed `inject` wasn't generaly useful for directives so there should be no code using it.\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br"),t("span",{staticClass:"line-number"},[e._v("6")]),t("br"),t("span",{staticClass:"line-number"},[e._v("7")]),t("br"),t("span",{staticClass:"line-number"},[e._v("8")]),t("br"),t("span",{staticClass:"line-number"},[e._v("9")]),t("br"),t("span",{staticClass:"line-number"},[e._v("10")]),t("br"),t("span",{staticClass:"line-number"},[e._v("11")]),t("br"),t("span",{staticClass:"line-number"},[e._v("12")]),t("br"),t("span",{staticClass:"line-number"},[e._v("13")]),t("br"),t("span",{staticClass:"line-number"},[e._v("14")]),t("br"),t("span",{staticClass:"line-number"},[e._v("15")]),t("br"),t("span",{staticClass:"line-number"},[e._v("16")]),t("br"),t("span",{staticClass:"line-number"},[e._v("17")]),t("br")])]),t("p",[t("strong",[e._v("（2）关闭 Issue")])]),e._v(" "),t("p",[e._v("如果当前 commit 针对某个 issue，那么可以在 Footer 部分关闭这个 issue。")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("Closes #234\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("p",[e._v("也可以一次性关闭多个 issue。")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("Closes #123，#245，#992\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("h3",{attrs:{id:"_4-revert-可忽视"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-revert-可忽视"}},[e._v("#")]),e._v(" 4. Revert（可忽视）")]),e._v(" "),t("p",[e._v("还有一种特殊情况，如果当前 commit 用于撤销以前的 commit，则必须以 "),t("code",[e._v("revert:")]),e._v(" 开头，后面跟着被撤销 Commit 的 Header。")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("revert: feat(pencil): add 'graphiteWidth' option\n\nThis reverts commit 667ecc1654a317a13331b17617d973392f415f02.\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br")])]),t("p",[e._v("Body 部分的格式是固定的，必须写成 "),t("code",[e._v("This reverts commit <hash>")]),e._v("，其中的 hash 是被撤销 commit 的 SHA 标识符。")]),e._v(" "),t("p",[e._v("如果当前 commit 与被撤销的 commit，在同一个发布（release）里面，那么它们都不会出现在 Change Log 里面。如果两者在不同的发布，那么当前 commit，会出现在 Change Log 的 Reverts 小标题下面。")]),e._v(" "),t("h2",{attrs:{id:"三-提交频率"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#三-提交频率"}},[e._v("#")]),e._v(" 三. 提交频率")]),e._v(" "),t("p",[e._v("关于什么时候提交一次：")]),e._v(" "),t("p",[e._v("每次你写完一个功能的时候，就应该做一次提交（这个提交是提交到本地的 git 库中）。")]),e._v(" "),t("p",[e._v("当然，这里的写完表示的是你的这个功能是没有问题的。")]),e._v(" "),t("h2",{attrs:{id:"四-angular-规范"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#四-angular-规范"}},[e._v("#")]),e._v(" 四. Angular 规范")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://docs.google.com/document/d/1QrDFcIiPjSLDn3EL15IJygNPiHORgU1_OOAqWjiDU5Y/edit#heading=h.greljkmo14y0",target:"_blank",rel:"noopener noreferrer"}},[e._v("Angular规范"),t("OutboundLink")],1),e._v(" 见下图：")]),e._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.staticaly.com/gh/oliver556/image-hosting@master/20220423/git_04-23_01.1b4243x1lcm8.webp",alt:"git_04-23_01"}})]),e._v(" "),t("h2",{attrs:{id:"附-团队协作风格指南"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#附-团队协作风格指南"}},[e._v("#")]),e._v(" 附：团队协作风格指南")]),e._v(" "),t("p",[e._v("在团队协作中，不管有多少人共同参与同一项目，我们期望每一行代码都像是同一个人编写的。因为需要永远遵循同一套编码规范。")]),e._v(" "),t("div",{staticStyle:{color:"#9e9e9e","text-align":"right","font-size":"14px"}},[t("br"),e._v(" "),t("br"),e._v("\n整理自\n"),t("a",{staticStyle:{"text-align":"right",color:"#9e9e9e","text-decoration":"none"},attrs:{href:"http://www.ruanyifeng.com/blog/2016/01/commit_message_change_log.html",rel:"external nofollow noopener noreferrer",target:"_blank"}},[e._v("《Commit message 和 Change log 编写指南》-阮一峰\n")]),e._v(" "),t("br"),e._v(" "),t("br"),e._v("\n参考\n"),t("a",{staticStyle:{"text-align":"right",color:"#9e9e9e","text-decoration":"none"},attrs:{href:"https://segmentfault.com/a/1190000004282514",rel:"external nofollow noopener noreferrer",target:"_blank"}},[e._v("［译］AngularJS Git提交信息规范\n  ")])])])}),[],!1,null,null,null);t.default=r.exports}}]);