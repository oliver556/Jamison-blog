(window.webpackJsonp=window.webpackJsonp||[]).push([[203],{538:function(s,t,a){"use strict";a.r(t);var e=a(7),n=Object(e.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"vue-cli4-配置打包命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#vue-cli4-配置打包命令"}},[s._v("#")]),s._v(" vue-cli4 配置打包命令")]),s._v(" "),t("h2",{attrs:{id:"📖-前言"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#📖-前言"}},[s._v("#")]),s._v(" 📖. 前言")]),s._v(" "),t("p",[s._v("为什么会需要配置多种环境变量？")]),s._v(" "),t("p",[s._v("在一个产品的开发过程中，一般来说都是会经历这么一个过程："),t("strong",[s._v("本地开发 → 测试版部署 → 测试 → 预上线 → 正式上线")]),s._v("。对应的每一个环节中的服务器地址，接口地址...都会不一样。那么我们需要怎么去处理这种情况。")]),s._v(" "),t("h2",{attrs:{id:"一-如何配置环境变量"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一-如何配置环境变量"}},[s._v("#")]),s._v(" 一. 如何配置环境变量")]),s._v(" "),t("h3",{attrs:{id:"_1-创建文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-创建文件"}},[s._v("#")]),s._v(" 1. 创建文件")]),s._v(" "),t("p",[s._v("在 vue-cli4 的脚手架构建的项目根目录中新建一个 "),t("code",[s._v(".env.[model]")]),s._v(" 文件，"),t("code",[s._v("model")]),s._v(" 为一个变量，可以通过这个 model 的变量值来判断当前属于哪个环境。model 可以根据你的需求来修改,\n该文件中写上对应的键值对。你需要多少个环境，就创建多少个 "),t("code",[s._v(".env.[model]")]),s._v(" 在根目录中，文件如下图。")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("# 预发环境\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("env"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("beta\n\n# 开发环境\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("env"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("development\n\n# 生产环境\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("env"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("production\n\n# 测试环境\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("env"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("test\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("p",[s._v("简单说明一下，为什么要创建四个文件")]),s._v(" "),t("p",[s._v("首先我们创建的文件名必须是 "),t("code",[s._v(".env.xxx")]),s._v("，"),t("strong",[s._v(".env.xxx 文件的 xxx 必须是和 package.json 里的 script 对象内部的命令一致")]),s._v("。")]),s._v(" "),t("p",[t("strong",[s._v("举个例子：")])]),s._v(" "),t("p",[s._v("我们创建了 "),t("code",[s._v(".env.test")]),s._v(" 这个文件，那么我们配置的打包命令 "),t("code",[s._v("build:test")]),s._v(" 的值 "),t("code",[s._v('"vue-cli-service build --mode test"')]),s._v("，--mode 后面的 "),t("code",[s._v("test")]),s._v(" 必须跟文件 "),t("code",[s._v(".env.test")]),s._v(" 一致，这样我们打包命令才会找到环境变量文件里面配置的参数 "),t("code",[s._v('"build:test": "vue-cli-service build --mode test"')])]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("请注意！！！")]),s._v(" "),t("p",[s._v("只有 "),t("code",[s._v("NODE_ENV")]),s._v("，"),t("code",[s._v("BASE_URL")]),s._v(" 和以 "),t("code",[s._v("VUE_APP_")]),s._v(" 开头的变量将通过 "),t("code",[s._v("webpack.DefinePlugin")]),s._v(" 静态地嵌入到客户端侧的代码中。这是为了避免意外公开机器上可能具有相同名称的私钥。")])]),s._v(" "),t("h3",{attrs:{id:"_2-环境变量文件说明"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-环境变量文件说明"}},[s._v("#")]),s._v(" 2. 环境变量文件说明")]),s._v(" "),t("p",[s._v("现在我们来到配置文件，这个配置文件的功能是为了判断当前打包环境是生产还是测试，或者本地，当然你也可以有很多的环境。在配置文件中我们通过 "),t("code",[s._v("process.env.VUE_APP_BASE_URL")]),s._v(" 这个全局字段去判断环境，\n然后将对应的接口地址匹配上。注意一点，上面的 "),t("code",[s._v('NODE_ENV = "production"')]),s._v(" 不可以省略，vue-cli 4.0 及之后的版本会根据 "),t("code",[s._v('NODE_ENV = "production"')]),s._v(" 来判断是否生产环境，如果你改变了这个就会被默认\n"),t("code",[s._v('NODE_ENV = "development"')]),s._v("，"),t("code",[s._v("development")]),s._v(" 和 "),t("code",[s._v("production")]),s._v(" 模式下打包出来的包结构会不同，为了一致性，所以配置文件的第一个字段应该设置为 "),t("code",[s._v('NODE_ENV = "production"')]),s._v("。")]),s._v(" "),t("blockquote",[t("p",[t("strong",[t("code",[s._v(".env.test")]),s._v("   (测试环境变量)")])])]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("NODE_ENV")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"test"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("VUE_APP_BASE_URL")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"接口请求测试地址"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("VUE_APP_API")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"接口请求测试地址"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("blockquote",[t("p",[t("strong",[t("code",[s._v(".env.production")]),s._v(" （正式环境变量）")])])]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("NODE_ENV")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"production"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("VUE_APP_BASE_URL")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"接口请求正式地址"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("VUE_APP_API")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"接口请求正式地址"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("blockquote",[t("p",[t("strong",[t("code",[s._v(".env.beta")]),s._v("  (预发环境变量)")])])]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("NODE_ENV")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"beta"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("VUE_APP_BASE_URL")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"接口请求预发地址"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("VUE_APP_API")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"接口请求预发地址"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("blockquote",[t("p",[t("strong",[t("code",[s._v(".env.development")]),s._v("  (开发环境变量)")])])]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("NODE_ENV")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"development"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("VUE_APP_BASE_URL")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/api"')]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// vue 跨域代理配置的标识")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("VUE_APP_API")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"测试环境地址"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("说明一下开发环境变量文件 "),t("code",[s._v("VUE_APP_BASE_URL")]),s._v(" 的值指向的是我们在 "),t("code",[s._v("vue.config.js")]),s._v(" 配置的跨域代理的字符串标识.")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("module"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("publicPath")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("devServer")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("proxy")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token string-property property"}},[s._v("'/api'")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("target")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'接口请求测试地址'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// API 服务器的地址")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("ws")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 代理 websockets")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("changeOrigin")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 虚拟的站点需要更管 origin")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("pathRewrite")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 重写路径 比如 '/api/aaa/ccc' 重写为 '/aaa/ccc'")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token string-property property"}},[s._v("'^/api'")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br")])]),t("h3",{attrs:{id:"_3-配置打包命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-配置打包命令"}},[s._v("#")]),s._v(" 3. 配置打包命令")]),s._v(" "),t("p",[t("code",[s._v("package.json")]),s._v(" 文件下的脚本：")]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"script"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"dev"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"vue-cli-service serve && webpack-dev-server --open --mode dev"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"serve"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"vue-cli-service serve"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"build"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"vue-cli-service build"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"build:dev"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"vue-cli-service build --mode development"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"build:prod"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"vue-cli-service build --mode production"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"build:beta"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"vue-cli-service build --mode beta"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"build:test"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"vue-cli-service build --mode test"')]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("p",[s._v("上面提到创建的 "),t("code",[s._v(".env.[model]")]),s._v(" 文件爱你，文件名中的 "),t("code",[s._v("model")]),s._v(" 对应 "),t("code",[s._v("package.json")]),s._v(" 文件中的打包脚本 "),t("code",[s._v("--model [model]")]),s._v("。")]),s._v(" "),t("p",[s._v("例如我现在想打包正式环境，正式环境对应 "),t("code",[s._v(".env.[model]")]),s._v(" 就是 "),t("code",[s._v(".env.prop")]),s._v("。")]),s._v(" "),t("p",[s._v("在 "),t("code",[s._v("package.json")]),s._v(" 的 "),t("code",[s._v("script")]),s._v(" 中添加 "),t("code",[s._v('"build:prod": "vue-cli-service build --mode production"')]),s._v("，其中 "),t("code",[s._v("production")]),s._v(" 这个对应配置文件名的 "),t("code",[s._v("mode")]),s._v("，这样 webpack 打包的时候会自动跟踪到这个文件，并去读取其中的各种配置字段，\n我们在项目中任意位置就可以通过 "),t("code",[s._v("process.env.xx")]),s._v(" 拿到其中 xx 配置属性。")]),s._v(" "),t("p",[s._v("现在我们只需要运行对应的脚本命令就可以打包对应环境的项目代码。例如：我现在想打包 "),t("code",[s._v("production")]),s._v(" 环境下的项目，在控制台运行 "),t("code",[s._v("npm run build:prod")]),s._v("，就可以执行正式环境打包。运行 "),t("code",[s._v("npm run build:dev")]),s._v("，则可以打包测试环境，该模式也可用于自动化部署。")]),s._v(" "),t("p",[s._v("综上所述，vue-cli4.x版本的打包命令和环境变量就配置完成了。")])])}),[],!1,null,null,null);t.default=n.exports}}]);