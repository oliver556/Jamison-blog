(window.webpackJsonp=window.webpackJsonp||[]).push([[79],{417:function(t,s,a){"use strict";a.r(s);var i=a(7),e=Object(i.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"git-迁移仓库并保留-commit-记录"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#git-迁移仓库并保留-commit-记录"}},[t._v("#")]),t._v(" Git 迁移仓库并保留 commit 记录")]),t._v(" "),s("div",{staticClass:"custom-block note"},[s("p",{staticClass:"custom-block-title"},[t._v("笔记")]),t._v(" "),s("p",[t._v("在支持 Git 的代码托管平台间进行迁移，并保留历史 commit 记录。")])]),t._v(" "),s("h2",{attrs:{id:"一-作用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#一-作用"}},[t._v("#")]),t._v(" 一. 作用")]),t._v(" "),s("p",[t._v("把在 A 托管平台的仓库完全的迁移到 B 托管平台，保留 commit 历史记录。")]),t._v(" "),s("h2",{attrs:{id:"二-场景"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#二-场景"}},[t._v("#")]),t._v(" 二. 场景")]),t._v(" "),s("p",[t._v("将 Gitlab 上的仓库迁移到 GitHub"),s("br"),t._v("\n将 Coding 上的仓库迁移到 GitHub"),s("br"),t._v("\n将 Gitee 上的仓库迁移到 GitHub"),s("br"),t._v("\n..."),s("br"),t._v("\n迁移前后，"),s("strong",[t._v("保留 commit 历史记录")]),t._v("，即在迁移后的新仓库中能查询历史提交信息，同时也能保留小绿点。")]),t._v(" "),s("h2",{attrs:{id:"三-步骤"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#三-步骤"}},[t._v("#")]),t._v(" 三. 步骤")]),t._v(" "),s("ul",[s("li",[t._v("建立新仓库")]),t._v(" "),s("li",[t._v("克隆旧仓库")]),t._v(" "),s("li",[t._v("推送新仓库")])]),t._v(" "),s("p",[t._v("下面，以 Coding 迁移到 GitHub 为例。")]),t._v(" "),s("h2",{attrs:{id:"_3-1-git-bash-操作"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-git-bash-操作"}},[t._v("#")]),t._v(" 3.1 Git Bash 操作")]),t._v(" "),s("p",[s("strong",[t._v("1. 在 GitHub 建立新仓库")])]),t._v(" "),s("p",[t._v("在 GitHub 中新建一个同名项目（不同名也可以），不要添加 "),s("code",[t._v("README.md")]),t._v("，以及任何 "),s("code",[t._v("License")]),t._v(" 和 "),s("code",[t._v(".gitignore")]),t._v(" 文件，只需要新建一个空的仓库。")]),t._v(" "),s("p",[s("span",{staticStyle:{color:"#ff0000"}},[t._v("只需要一个空的仓库。")])]),t._v(" "),s("p",[s("strong",[t._v("2. 克隆 Coding 上的项目")])]),t._v(" "),s("p",[t._v("将 Coding 上想要迁移的项目完整克隆到本地。")]),t._v(" "),s("p",[t._v("本地执行")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" clone https://git.coding.net/aligoogle/blog.git  "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--bare")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[s("strong",[t._v("3. 将克隆下来的仓库推送到GitHub")])]),t._v(" "),s("p",[t._v("克隆完成后，将仓库推送到 GitHub。")]),t._v(" "),s("p",[t._v("使用新仓库页面提供的仓库地址（web URL），推送所有的分支和对象")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" blog.git\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" push https://github.com/aligoogle/blog.git "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--all")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("p",[s("strong",[t._v("4. 完成后，再执行推送所有的 Tags")])]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" push https://github.com/aligoogle/blog.git "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--tags")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("这样，整个仓库就全部迁移到 GitHub 了，如果这些 commit 中的邮箱在 GitHub 配置中，可以看到小绿点也一起迁移过来了。")]),t._v(" "),s("h2",{attrs:{id:"_3-2-tortoisegit-操作"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-tortoisegit-操作"}},[t._v("#")]),t._v(" 3.2 TortoiseGit 操作")]),t._v(" "),s("p",[t._v("这种简单的操作我不是很喜欢用可视化工具，不过这里也介绍下怎么用「小乌龟」来完成仓库的迁移。")]),t._v(" "),s("p",[s("strong",[t._v("1. 在 GitHub 建立新仓库")])]),t._v(" "),s("p",[t._v("同上，不赘述了。")]),t._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[t._v("克隆 Coding 上的项目")])]),t._v(" "),s("p",[t._v("同上，不赘述了。")]),t._v(" "),s("ol",{attrs:{start:"3"}},[s("li",[t._v("将克隆下来的仓库推送到 GitHub")])]),t._v(" "),s("p",[t._v("进入项目文件夹，鼠标右键 -> Git Sync…")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/oliver556/image-hosting@master/20220425/git_04-25_01.2jdi27nkoqi0.webp",alt:"git_04-25_01"}})]),t._v(" "),s("p",[t._v("点击 Manage。")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/oliver556/image-hosting@master/20220425/git_04-25_02.48x4zsksgf20.webp",alt:"git_04-25_02"}})]),t._v(" "),s("p",[t._v("填写 GitHub 远程仓库的信息，并 Add New/Save，应用，确认。")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/oliver556/image-hosting@master/20220425/git_04-25_03.4pkvscaauyk0.webp",alt:"git_04-25_03"}})]),t._v(" "),s("p",[t._v("Remote URL 选则刚刚添加的 gitHub，然后 Push。")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/oliver556/image-hosting@master/20220425/git_04-25_04.7775ka9kd0o0.webp",alt:"git_04-25_04"}})]),t._v(" "),s("p",[t._v("最后再提交 Tags.")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/oliver556/image-hosting@master/20220425/git_04-25_05.6v5m8bi59ts0.webp",alt:"git_04-25_05"}})]),t._v(" "),s("h2",{attrs:{id:"四-git-命令区别"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#四-git-命令区别"}},[t._v("#")]),t._v(" 四. git 命令区别")]),t._v(" "),s("p",[t._v("上面在推送代码至 GitHub（新仓库）时，我们用到了下面这个命令：")]),t._v(" "),s("p",[s("code",[t._v("git push https://github.com/aligoogle/blog.git --all")])]),t._v(" "),s("p",[t._v("其实还有另外一个命令：")]),t._v(" "),s("p",[s("code",[t._v("git push https://github.com/aligoogle/blog.git --mirror")])]),t._v(" "),s("p",[t._v("关于这两个命令的区别，可以参见 "),s("a",{attrs:{href:"https://stackoverflow.com/questions/49343025/git-push-all-vs-mirror",target:"_blank",rel:"noopener noreferrer"}},[t._v("Git push –all vs –mirror"),s("OutboundLink")],1),t._v(" 。")])])}),[],!1,null,null,null);s.default=e.exports}}]);